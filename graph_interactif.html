
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>Graphe interactif - Algo</title>
  <script src="https://unpkg.com/vis-network@9.1.2/dist/vis-network.min.js"></script>
  <link href="https://unpkg.com/vis-network@9.1.2/styles/vis-network.min.css" rel="stylesheet" />
  <style>
    body { font-family: Arial, sans-serif; text-align:center; }
    #mynetwork { width: 100%; height: 85vh; border: 1px solid lightgray; margin-top:10px; }
    button { margin: 5px; padding: 10px 15px; font-weight: bold; }
  </style>
</head>
<body>
  <h2>Visualisation des algorithmes de graphe</h2>
  <div>
    <button onclick="runBFS()">BFS (Largeur)</button>
    <button onclick="runDijkstra()">Dijkstra</button>
    <button onclick="runKruskal()">Kruskal (MST)</button>
    <button onclick="resetColors()">Réinitialiser</button>
  </div>
  <div id="mynetwork"></div>

  <script>
    const nodes = new vis.DataSet([{"id": "Rennes", "label": "Rennes"}, {"id": "Caen", "label": "Caen"}, {"id": "Nantes", "label": "Nantes"}, {"id": "Paris", "label": "Paris"}, {"id": "Bordeaux", "label": "Bordeaux"}, {"id": "Lyon", "label": "Lyon"}, {"id": "Lille", "label": "Lille"}, {"id": "Dijon", "label": "Dijon"}, {"id": "Nancy", "label": "Nancy"}, {"id": "Grenoble", "label": "Grenoble"}]);
    const edges = new vis.DataSet([{"from": "Rennes", "to": "Caen", "label": "75", "color": "gray"}, {"from": "Rennes", "to": "Nantes", "label": "45", "color": "gray"}, {"from": "Rennes", "to": "Paris", "label": "110", "color": "gray"}, {"from": "Caen", "to": "Paris", "label": "50", "color": "gray"}, {"from": "Caen", "to": "Lille", "label": "65", "color": "gray"}, {"from": "Nantes", "to": "Paris", "label": "80", "color": "gray"}, {"from": "Nantes", "to": "Bordeaux", "label": "90", "color": "gray"}, {"from": "Paris", "to": "Bordeaux", "label": "150", "color": "gray"}, {"from": "Paris", "to": "Lille", "label": "70", "color": "gray"}, {"from": "Paris", "to": "Dijon", "label": "60", "color": "gray"}, {"from": "Paris", "to": "Nancy", "label": "120", "color": "gray"}, {"from": "Bordeaux", "to": "Lyon", "label": "100", "color": "gray"}, {"from": "Lyon", "to": "Dijon", "label": "70", "color": "gray"}, {"from": "Lyon", "to": "Grenoble", "label": "40", "color": "gray"}, {"from": "Lyon", "to": "Nancy", "label": "75", "color": "gray"}, {"from": "Dijon", "to": "Nancy", "label": "75", "color": "gray"}, {"from": "Dijon", "to": "Grenoble", "label": "90", "color": "gray"}, {"from": "Nancy", "to": "Grenoble", "label": "80", "color": "gray"}]);
    const container = document.getElementById('mynetwork');
    const network = new vis.Network(container, {nodes, edges}, {
      edges: { font: { align: 'middle' }, smooth: true },
      nodes: { color: { background: '#9ecfff', border: '#555' }, shape: 'ellipse' },
      physics: { stabilization: true }
    });

    const bfsPath = ["Paris", "Rennes", "Nantes", "Bordeaux", "Caen", "Lille", "Dijon", "Nancy", "Lyon", "Grenoble"];
    const dijkstraPath = ["Paris", "Dijon", "Grenoble"];
    const kruskalEdges = [["Lyon", "Grenoble"], ["Rennes", "Nantes"], ["Caen", "Paris"], ["Paris", "Dijon"], ["Caen", "Lille"], ["Lyon", "Dijon"], ["Rennes", "Caen"], ["Lyon", "Nancy"], ["Nantes", "Bordeaux"]];

    function colorEdges(pathNodes, color) {
      const allEdges = edges.get();
      for (let e of allEdges) {
        e.color = 'gray';
        if (pathNodes) {
          for (let i = 0; i < pathNodes.length - 1; i++) {
            const a = pathNodes[i], b = pathNodes[i+1];
            if ((e.from === a && e.to === b) || (e.from === b && e.to === a)) {
              e.color = color;
            }
          }
        }
      }
      edges.update(allEdges);
    }

    function runBFS() {
      colorEdges(bfsPath, 'orange');
      alert('BFS depuis Paris :\n' + bfsPath.join(' → '));
    }

    function runDijkstra() {
      colorEdges(dijkstraPath, 'red');
      alert('Dijkstra Paris → Grenoble :\n' + dijkstraPath.join(' → '));
    }

    function runKruskal() {
      const allEdges = edges.get();
      for (let e of allEdges) {
        e.color = kruskalEdges.some(([a,b]) =>
          (e.from === a && e.to === b) || (e.from === b && e.to === a)
        ) ? 'green' : 'gray';
      }
      edges.update(allEdges);
      alert('Kruskal : arbre couvrant minimal surligné en vert');
    }

    function resetColors() {
      const allEdges = edges.get();
      for (let e of allEdges) e.color = 'gray';
      edges.update(allEdges);
    }
  </script>
</body>
</html>
